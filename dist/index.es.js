import{useState as t,useEffect as r}from"react";function e(r){const[e,n]=t(r),[o,c]=t(void 0);return[e,o,function(t){c(e),n(t)}]}function n(e,n){const[o,c]=t(function(t,r){const e=localStorage.getItem(t);if(e){try{const t=JSON.parse(e);if(t)return t}catch(t){}return e}return r}(e,n));return r((()=>{localStorage.setItem(e,o)}),[o]),[o,c]}function o(e,n){const[o,c]=t(function(t,r){const e=localStorage.getItem(t);if(e){try{const t=JSON.parse(e);if(t)return t}catch(t){}return e}return r}(e,n)),a=new Event("storage");return r((()=>{window.addEventListener("storage",(()=>{const t=localStorage.getItem(e);if(t){try{const r=JSON.parse(t);if(r!=o)return void c(r)}catch(t){}if(t!=o)return void c(t)}return n}))}),[]),r((()=>{localStorage.setItem(e,o),window.dispatchEvent(a)}),[o]),[o,c]}export{o as useLocalStorage,n as usePersistentState,e as usePrevState};
