import{useState as t,useEffect as n,useRef as e}from"react";function r(n){const[e,r]=t(n),[o,c]=t(void 0);return[e,o,function(t){c(e),r(t)}]}function o(e,r){const[o,c]=t(function(t,n){const e=localStorage.getItem(t);if(e){try{const t=JSON.parse(e);if(t)return t}catch(t){}return e}return n}(e,r));return n((()=>{localStorage.setItem(e,JSON.stringify(o))}),[o]),[o,c]}function c(e,r){const[o,c]=t(function(t,n){const e=localStorage.getItem(t);if(e){try{const t=JSON.parse(e);if(t)return t}catch(t){}return e}return n}(e,r)),i=new Event("storage");return n((()=>{window.addEventListener("storage",(()=>{const t=localStorage.getItem(e);if(t){try{const n=JSON.parse(t);if(n!=o)return void c(n)}catch(t){}if(t!=o)return void c(t)}return r}))}),[]),n((()=>{localStorage.setItem(e,o),window.dispatchEvent(i)}),[o]),[o,c]}function i(t,e,r){n((()=>{const n=setTimeout((()=>{t()}),r);return()=>{clearTimeout(n)}}),[...e])}function a(r,o,c){const[i,a]=t(!1);let s=e(null);const u=()=>{var t;s.current?(null===(t=s.current)||void 0===t||t.call(s),s.current=null,setTimeout(u,c)):a(!1)};n((()=>{i?s.current=r:(a(!0),r(),setTimeout(u,c))}),[...o])}function s(){return function(t){navigator.clipboard.writeText(t)}}function u(e){const[r,o]=t([window.innerWidth,window.innerHeight]),[c,i]=t("");return n((()=>(window.addEventListener("resize",(t=>{o([window.innerWidth,window.innerHeight])})),()=>{window.removeEventListener("resize",(t=>{}))})),[]),a((()=>{const t=null==e?void 0:e.sort(((t,n)=>{let e=0,r=0;return Object.keys(t).forEach((t=>e++)),Object.keys(n).forEach((t=>r++)),r-e}));null==t||t.forEach((t=>{let n=t.name;delete t.name;for(const e of Object.keys(t)){switch(e){case"maxWidth":if(r[0]>t[e])return;break;case"minWidth":if(r[0]<t[e])return;break;case"maxHeight":if(r[1]>t[e])return;break;case"minHeight":if(r[1]<t[e])return}i(n)}}))}),[r],100),{width:r[0],height:r[1],screen:c}}function d(t,r){const o=e(!0);n((()=>{o.current&&(t(),o.current=!1)}),[...r])}function l(t,r){const o=e(!0);n((()=>{o.current?o.current=!1:t()}),[...r])}function f(e,r){const[o,c]=t(!0),[i,a]=t(),[s,u]=t(void 0);return n((()=>{(async()=>{try{const t=await fetch(e,r);if(!t.ok)throw new Error(t.status.toString());const n=await t.json();u(n)}catch(t){a(t)}c(!1)})()}),[]),{loading:o,error:i,data:s}}function w(t){n((()=>{const n=document.createElement("script");return n.src=t,n.async=!0,document.body.appendChild(n),()=>{document.body.removeChild(n)}}),[])}function h(e){const r=new URLSearchParams(window.location.search),[o,c]=t(r.get(e)||"");return n((()=>{const t=new URL(window.location.pathname+window.location.search),n=t.searchParams;""==o?n.delete(e):n.set(e,o),t.search=n.toString();const r=t.toString()+window.location.hash;window.history.replaceState({},document.title,r)}),[o]),[o,c]}export{s as useClipboard,i as useDebounce,f as useFetch,d as useInitialRender,c as useLocalStorage,l as useNoInitialRender,o as usePersistentState,r as usePrevState,h as useQueryState,u as useScreen,w as useScript,a as useThrottle};
