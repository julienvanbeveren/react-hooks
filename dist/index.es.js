import{useState as t,useEffect as n,useRef as e}from"react";function r(n){const[e,r]=t(n),[o,c]=t(void 0);return[e,o,function(t){c(e),r(t)}]}function o(e,r){const[o,c]=t(function(t,n){const e=localStorage.getItem(t);if(e){try{const t=JSON.parse(e);if(t)return t}catch(t){}return e}return n}(e,r));return n((()=>{localStorage.setItem(e,o)}),[o]),[o,c]}function c(e,r){const[o,c]=t(function(t,n){const e=localStorage.getItem(t);if(e){try{const t=JSON.parse(e);if(t)return t}catch(t){}return e}return n}(e,r)),u=new Event("storage");return n((()=>{window.addEventListener("storage",(()=>{const t=localStorage.getItem(e);if(t){try{const n=JSON.parse(t);if(n!=o)return void c(n)}catch(t){}if(t!=o)return void c(t)}return r}))}),[]),n((()=>{localStorage.setItem(e,o),window.dispatchEvent(u)}),[o]),[o,c]}function u(t,e,r){n((()=>{const n=setTimeout((()=>{t()}),r);return()=>{clearTimeout(n)}}),[...e])}function i(r,o,c){const[u,i]=t(!1);let a=e(null);const s=()=>{var t;a.current?(null===(t=a.current)||void 0===t||t.call(a),a.current=null,setTimeout(s,c)):i(!1)};n((()=>{u?a.current=r:(i(!0),r(),setTimeout(s,c))}),[...o])}export{u as useDebounce,c as useLocalStorage,o as usePersistentState,r as usePrevState,i as useThrottle};
